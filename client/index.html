<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
		<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
		<script src='https://code.jquery.com/jquery-2.2.0.min.js'></script>
		<link rel="stylesheet" href="../bower_components/skeleton/css/normalize.css">
		<link rel="stylesheet" href="../bower_components/skeleton/css/skeleton.css">
		<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
	</head>
	<style>
		body {
			background: #3498db;
			background-size: cover;
			color: white;
			font-family: 'Montserrat', sans-serif;
			text-shadow: 5px 5px 5px black;
		}
		input {
			color: black;
		}
	</style>

	<body>
		<div class="container" style="background-color: rgba(0, 0, 0, 0.5)">
			<div class="row" style="margin-top: 15%; text-align: center">
				<h1>Drop a GIF Bomb</h1>
				<form action="/stripe" method="POST">
					send <input type="number" name="pictureAmount" placeholder=1
					min="1" max="5" />&nbsp; imgs about:<br/>
					<input type="text" name="topic" placeholder="GIF Topic" /><br/>
					to my friend at:<br /><br />
					<input type="tel" name="phone" autofocus="autofocus" pattern="^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$" placeholder="(888) 888 - 8888" /><br/>
					<noscript>You must <a href="http://www.enable-javascript.com" target="_blank">enable JavaScript</a> in your web browser in order to pay via Stripe.</noscript>
					<script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_VRhelXTRnpAfGDqQ29t0Qlz5" data-amount="100" data-name="5 SMS sent" data-description="THIS IS A DESCRIPTION YO" data-image="http://icons.iconarchive.com/icons/everaldo/crystal-clear/128/App-core-bomb-icon.png"
					data-locale="auto"
					data-panel-label=""
					data-label="Drop the GIFs"
					data-bitcoin=true >
					</script>
				</form>
				<h5>Powered by <a href="https://popkey.co">PopKey</a></h5>
			</div>
		</div>
	</body>
	<script>

// TODO: MVP of background img/gif rotation, performance is terrible though, must cache images
		function getGifs(){
			var gifArray = [
			'https://media.giphy.com/media/raBbE1fizfZGE/giphy.gif',

			'https://media.giphy.com/media/pRnUtEUEUyxoY/giphy.gif',
			'https://media.giphy.com/media/QXagUlpya3yyQ/giphy.gif',
			'https://m.popkey.co/fb42c7/6mVrO.gif?c=popkey-web&p=popkey&i=sciencetech-ent&l=direct&f=.gif',
			'https://m.popkey.co/429a28/1Zgpx.gif',
			'https://m.popkey.co/807aa5/Ep77Q_f-maxage-0.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/a3831c/XRpwx.gif',
			'https://m.popkey.co/1c90e3/pxL8_f-maxage-0.gif',
			'https://m.popkey.co/add174/oGWX9.gif',
			'https://m.popkey.co/16f1fe/JLL8v.gif',
			'https://media.giphy.com/media/Ywg4EIvQfdNmw/giphy.gif',
			'https://m.popkey.co/c888ad/3GpKb.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/17905b/5mp3A.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/819aae/Wk990_f-maxage-0.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/65d565/LlOgy.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/428f97/R4oEa_f-maxage-0.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/6c3c1c/dgD43.gif?c=popkey-web&p=popkey&i=hotlinebling&l=direct&f=.gif',
			'https://m.popkey.co/45cf3f/3REMZ_f-maxage-0.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/4cbd35/86VMW.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/7272ba/xqKk4.gif?c=popkey-web&p=cheezburger&i=cheezburger-ent&l=direct&f=.gif',
			'https://m.popkey.co/a69e8c/Vl8Qe.gif',
		];
			var gifs = [];
			//preload  them images woo
			for(var i = 0; i < gifArray.length; i++){
				gifs[i] = new Image();
				gifs[i].src = gifArray[i];
			}
			return gifs
		}
		var counter = 1;
		var firstImg = new Image();
		firstImg.src = 'https://media.giphy.com/media/raBbE1fizfZGE/giphy.gif';
		var gifs = getGifs();
		var body = document.getElementsByTagName("BODY")[0]
		body.style.backgroundImage = 'url(' + firstImg.src + ')';
		setInterval(function() {
			(counter >= gifs.length - 1) ? counter = 0 : counter++
			body.style.backgroundImage = 'url(' + gifs[counter].src + ')';
		}, 3500)
	</script>
</html>
